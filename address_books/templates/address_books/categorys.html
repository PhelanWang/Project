{% extends "address_books/base.html" %}


{% block content %}
    {#    <h3 class="text-muted">所有分组:</h3>#}

    <div class="panel panel-success">
        <div class="panel-heading">
            <h3 class="panel-title">
                所有分组
            </h3>
        </div>
        <div class="panel-body">
            <table class="table table-striped">
                <thead>
                <tr>
                    <th>分组名</th>
                    <th style="text-align: center;">编辑</th>
                </tr>
                </thead>
                <tbod>
                    {% for category in categorys %}
                        <tr>
                            <th><a href="{% url 'address_books:category' category_id=category.id category_page=1 %}" class="list-group-item">
                                <span class="glyphicon glyphicon-list-alt"></span> {{ category }}
                            </a>
                            </th>
                            <th style="text-align: center;">
                                <a href="{% url 'address_books:edit_category' category_id=category.id %}" class="btn btn-default">修改</a> /
                                <a href="#"  data-toggle="modal" data-target="#myModal" onclick="setname('{{ category }}', '{{ category.id }}')" class="btn btn-default">删除</a>
                            </th>
                        </tr>
                    {% endfor %}
                </tbod>
            </table>


            <!-- 模态框（Modal） -->
            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                &times;
                            </button>
                            <h4 class="modal-title" id="myModalLabel">
                                确认删除信息
                            </h4>
                        </div>
                        <div class="modal-body">
                            确定要删除分组<label id="lable_name">aaa</label>吗？
                            <p id="show_href"></p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                            <a id="delete_submit" href="#" type="button" class="btn btn-default">确定删除</a>
                        </div>
                    </div><!-- /.modal-content -->
                </div><!-- /.modal -->
            </div>

            <script type="text/javascript">
                function setname(name, category_id){
                    document.getElementById('lable_name').innerHTML = name.toString();
                    href_str = document.getElementById('delete_submit').href;
                    var split = href_str.split('/');
                    var new_str = "";
                    split[split.length-1] = category_id.toString();
                    split[split.length-3] = 'delete_category'
                    for(var i=0; i<split.length; i++){
                        new_str += split[i];
                        if(i != split.length-1) {
                            new_str += '/';
                        }
                    }
                    new_str += '/'
                    document.getElementById('delete_submit').href = new_str;
                }
            </script>



        </div>
        <div class="panel-footer">
            <a href="{% url 'address_books:new_category' %}" class="list-group-item"><span class="glyphicon glyphicon-folder-plus"></span>
                <span class="glyphicon glyphicon-plus"></span> 添加分组
            </a>
        </div>
    </div>
    <div class="text-center">
        <ul class="pagination">
            {% if categorys_page != 1 %}
                <li><a href="{% url 'address_books:categorys' categorys_page|add:'-1' %}">&laquo;</a></li>
            {% endif %}
            {% for index in page_list %}
                {% if categorys_page == index %}
                    <li class="active"><a href="{% url 'address_books:categorys' index %}">{{ index }}</a></li>
                {% else %}
                    <li><a href="{% url 'address_books:categorys' index %}">{{ index }}</a></li>
                {% endif %}
            {% endfor %}
            {% if categorys_page != page_list|length %}
                <li><a href="{% url 'address_books:categorys' categorys_page|add:'1' %}">&raquo;</a></li>
            {% endif %}
        </ul>
    </div>
{% endblock content %}
